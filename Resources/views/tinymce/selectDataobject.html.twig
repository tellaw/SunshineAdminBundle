{% extends '@TellawSunshineAdmin/tinymce/basePopinTinyMce.html.twig' %}

{% block tinymce_javascript %}
    <script>
        $('.tinymce-submit').on('click', function (e) {
            var dataId = $('#form_comboEntitySelector_entity').val();
            var dataName = $('#form_comboEntitySelector_family option:selected').text() + ' - ' + $('#form_comboEntitySelector_entity option:selected').text();
            var family = $('#form_comboEntitySelector_family').val();
            var plugin = parent.tinymce.PluginManager.get('dataobject')(editor);
            plugin.createObject(dataId, family, dataName);
            editor.windowManager.close();
            e.preventDefault();
            e.stopPropagation();
        });
    </script>
{% endblock %}
